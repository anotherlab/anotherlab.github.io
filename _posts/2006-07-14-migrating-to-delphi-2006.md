---
title: Migrating to Delphi 2006
date: 2006-07-14T20:01:00-05:00
---
I&#8217;ve been working on migrating our Delphi 5 code to [Delphi 2006](http://www.borland.com/us/products/delphi/index.html).  For the most part it&#8217;s been pretty straight forward, the [fun part](http://www.fotosearch.com/IGS016/is150-149/) has been dealing with the assortment of 3rd party packages.  Some of them required new versions, others were not available and I had to migrate them myself.  I&#8217;ll save my [DevExpress](http://www.devexpress.com/) experiences for another post&#8230;

Most of our Delphi code has been in Delphi 5 for a number of reasons.  We mainly stayed with it because it worked and did what we needed.  We did a complete rewrite of flagship app, [VersaTrans RP](http://www.versatrans.com/products/versatrans_rp.cfm), and Delphi 6 and Delphi 7 were released during that cycle.  Delphi 6 didn&#8217;t add any features that we needed and Delphi 7 came out during regression testing for RP.  It would have been insane to switch compilers during final testing.  I do use Delphi 7 for our web based application, [e-Link RP](http://www.versatrans.com/products/versatrans_e-link.cfm), mainly because of the SOAP functionality.  Now it&#8217;s time to round up the children and jump on the Delphi 2006 wagon.

One of the packages that I migrated up was [Abbrevia](http://sourceforge.net/projects/tpabbrevia/).  This is an Open Source compression toolkit that includes components for handling PKZip, CAB, TAR, and gzip formats.  It used to be a commercial product from [Turbopower](http://www.turbopower.com/), but a few years back it became Open Source when Turbopower was bought out by Los Vegas [gaming company](http://www.aristocratgaming.com/usa/home.asp).  Since going Open Source, development has come to a flying stop and nothing new has been released since 2004.  I had to tweak the package files somewhat to compile with Delphi 2006.

The distribution came with tons of file, and package files (.dpk) for every version of Delphi/C++Builder from 3 to 7.  I took the Delphi 7 package files and edited them outside Delphi to make Delphi 2006 packages out of them.  I probably could have done within Delphi, it was easy enough to do with [TextPad](http://www.textpad.com/).  I changed the names to match the compiler, Abbrevia uses the the compiler version to differentiate between the various package files.  B305\_r70.dpk became B305\_r100 and B305\_d70 became B305\_d100.  Except they didn&#8217;t include B305\_d70, I had to use the Delphi 5 version B305\_d50.

I also changed the file paths around.  There is a source folder and a packages folder.  I added a bin folder and edited the package files to place all of the compiled units in that folder.  I also need to explicitly add the source folder to the package&#8217;s source path.  Then I tried to compile.  The runtime package compiled without incident.  I moved it&#8217;s .bpl file to my system32 folder and moved to the design time package.  It failed to compile because it couldn&#8217;t find the DesignEditors unit.  The DesignEditors unit contains the base classes for implementing component editors.  You used to be able to have that unit in your runtime code, Borland has stopped allowing it.  It does come with Delphi, just not on the default search paths.

So I figured I could just add the path to DesignEditors.pas to the package search path.  Just add the path and [Bob&#8217;s your uncle](http://www.jerrypournelle.com/reports/jerryp/bobs.html).  Nope, didn&#8217;t work.  DesignEditors.pas has a typo in it. It&#8217;s missing a comma in the uses clause of the implementation section.  My first inclination was to just add the [idiot comma](http://adamsmedia.stores.yahoo.net/cosupoyofors.html), but it seemed like other things would have failed if that was the case.  I was doing it wrong.  Instead of adding the source path, I&#8217;m supposed to have added the [.dcp](http://delphi.about.com/od/beginners/a/aa032800a.htm) compiled package, which is in DesignIDE.dcp.  Once I added that unit to the package&#8217;s requires list, everything was [good to go](http://www.nasa.gov/images/content/105540main_image_feature_248a_ajh4.jpg).

<div>
  Tech Tags: <a href="http://technorati.com/tag/Delphi+2006" rel="tag">Delphi 2006</a> <a href="http://technorati.com/tag/Delphi+7" rel="tag">Delphi 7</a> <a href="http://technorati.com/tag/Delphi+5" rel="tag">Delphi 5</a> <a href="http://technorati.com/tag/Delphi" rel="tag">Delphi</a> <a href="http://technorati.com/tag/Abbrevia" rel="tag">Abbrevia</a> <a href="http://technorati.com/tag/TurboPower" rel="tag">TurboPower</a> <a href="http://technorati.com/tag/Open+Source" rel="tag">Open Source</a> <a href="http://technorati.com/tag/Code+migration" rel="tag">Code migration</a>
</div>
