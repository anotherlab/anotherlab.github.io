<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Using console jQuery to scrape lists from Apple’s developer portal. | Chris Miller’s 4th Blog</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Using console jQuery to scrape lists from Apple’s developer portal." />
<meta name="author" content="Chris Miller" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I needed to grab the lists of registered devices and developers from our company’s Apple Developer portal. Unless I’m being particularly obtuse (an outcome that I never rule out), Apple does not provide any means of exporting the lists." />
<meta property="og:description" content="I needed to grab the lists of registered devices and developers from our company’s Apple Developer portal. Unless I’m being particularly obtuse (an outcome that I never rule out), Apple does not provide any means of exporting the lists." />
<link rel="canonical" href="http://localhost:4000/2017/03/16/using-console-jquery-to-scrape-lists-from-apples-developer-portal/" />
<meta property="og:url" content="http://localhost:4000/2017/03/16/using-console-jquery-to-scrape-lists-from-apples-developer-portal/" />
<meta property="og:site_name" content="Chris Miller’s 4th Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-03-16T16:18:49-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Using console jQuery to scrape lists from Apple’s developer portal." />
<script type="application/ld+json">
{"datePublished":"2017-03-16T16:18:49-04:00","@type":"BlogPosting","url":"http://localhost:4000/2017/03/16/using-console-jquery-to-scrape-lists-from-apples-developer-portal/","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2017/03/16/using-console-jquery-to-scrape-lists-from-apples-developer-portal/"},"dateModified":"2017-03-16T16:18:49-04:00","author":{"@type":"Person","name":"Chris Miller"},"description":"I needed to grab the lists of registered devices and developers from our company’s Apple Developer portal. Unless I’m being particularly obtuse (an outcome that I never rule out), Apple does not provide any means of exporting the lists.","headline":"Using console jQuery to scrape lists from Apple’s developer portal.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Chris Miller's 4th Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Chris Miller&#39;s 4th Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Using console jQuery to scrape lists from Apple&amp;#8217;s developer portal.</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2017-03-16T16:18:49-04:00" itemprop="datePublished">Mar 16, 2017
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Chris Miller</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a data-flickr-embed="true" href="https://www.flickr.com/photos/sdfriend/4330975151/in/photolist-7AHo2n-5tBuY2-5nG9d6-6Cu6n2-7T7QyJ-nD838F-7MyVgs-pzHMvF-7ysfhx-9b3ShZ-7MyWku-pt1PC3-qSaNvv-JuyvL-mX572e-sFXPqw-fHoVpn-RxGQmA-3RHmqY-77JVVD-EJZUa-a7JZpq-pozp7V-8K6ixq-aE2eAY-89tkSQ-ehKgsz-6FDYaR-6EXDzC-4SEsTq-aE2eQu-9w4UWt-m28vsm-4mEXi1-6gtnrL-5TNHYc-6Ebjgh-4Etf7H-5XMUDS-sqw1z-5NB7fm-6Vwq72-sajUjG-4meALm-5pUpzM-43q6v9-7Nn6La-6vR16J-y2jVx-Mg8u" title="Scrape"><img loading="lazy" src="https://i2.wp.com/c1.staticflickr.com/5/4049/4330975151_b96ab89fc1_z.jpg?resize=640%2C426&#038;ssl=1" width="640" height="426" alt="Scrape" data-recalc-dims="1" /></a><br />
I needed to grab the lists of registered devices and developers from our company’s Apple Developer portal. Unless I’m being particularly obtuse (an outcome that I never rule out), Apple does not provide any means of exporting the lists.</p>

<p>Apple only allows 100 devices of each type (iPhone, iPad, iWhatever) to be registered as development devices. No matter how many iOS developers that you have at your company, 100 is the limit. And if you remove a device from that list, it still counts towards that total.  Once a year, you can reset the list and carry over the devices that you still need and drop off the ones that are not needed.  To make this easier to manage, I wanted to get a list of the devices and their ids and have the developers pick the ones that they still need.</p>

<p>So I wanted to export that list.  And Apple doesn’t let you export that list.  You can see it on the screen and work with the items in the list, but no export.  I figured that I wasn’t the only person dealing with that limitation so I did a quick search on Stack Overflow and found <a href="http://stackoverflow.com/a/29426740/206">this little gem</a>.</p>

<pre class="brush: jscript; title: ; notranslate" title="">var ids = ["Device ID"];
var names = ["Device Name"];
$("td[aria-describedby=grid-table_name]").each(function(){
    names.push($(this).html());
});
$("td[aria-describedby=grid-table_deviceNumber]").each(function(){
    ids.push($(this).html());
});

var output = "";
for (var index = 0; index &lt; ids.length; index++) {
    output += ids[index] + "\t" + names[index] + "\n";
}
console.log(output);</pre>

<p>To use that code, you would go to the list of devices in the browser. Then open up the developer tools for that browser. For example, in Chrome you would press F12 to open up the developer tools. Staying with the Chrome example, you would click on the Console tab in the developer tools and paste that Javascript code in and then press the Enter key. The code would execute within the domain of the page and generate a two column list of device ids and names.</p>

<p>To understand what that code does, you need to look at how the data is rendered on the page. The device list is stored in a HTML table, with each row looking like this</p>

<pre class="brush: xml; highlight: [5,7]; title: ; notranslate" title="">&lt;tr id="1" tabindex="-1" role="row" class="ui-widget-content jqgrow ui-row-ltr"&gt;
    &lt;td role="gridcell" style="text-align:center;display:none;width: 34px;" aria-describedby="grid-table_cb"&gt;
        &lt;input role="checkbox" type="checkbox" id="jqg_grid-table_1" class="cbox" name="jqg_grid-table_1"&gt;
    &lt;/td&gt;
    &lt;td role="gridcell" style="" class="ui-ellipsis bold" title="iPad" aria-describedby="grid-table_name"&gt;iPad&lt;/td&gt;
    &lt;td role="gridcell" style="display:none;" class="ui-ellipsis" title="c" aria-describedby="grid-table_status"&gt;c&lt;/td&gt;
    &lt;td role="gridcell" style="" class="ui-ellipsis" title="twletpb659m0ju078namuy8xnv2j0fzt1kytanfz" aria-describedby="grid-table_deviceNumber"&gt;twletpb659m0ju078namuy8xnv2j0fzt1kytanfz&lt;/td&gt;
&lt;/tr&gt;
</pre>

<p>Looking at the highlighted lines 6 and 9, we can see the device name and device id as the text of table cell tag. Each cell has a <a href="https://www.w3.org/TR/wai-aria/states_and_properties#aria-describedby">aria-describedby</a> attribute to identity the type of value being stored. We can search on the values of the attributes to locate the data that we want. Going back to the javascript, look at the following lines:</p>

<pre class="brush: jscript; title: ; notranslate" title="">var names = ["Device Name"];
$("td[aria-describedby=grid-table_name]").each(function(){
    names.push($(this).html());
});
</pre>

<p>The first line declares a Javascript array with an initial array element of “Device Name”. The next line performs a jQuery select for all of the &lt;td/&gt; elements that have attribute of aria-describedby with the value grid-table_name. The next part of the statement iterates over the list of matching &lt;td/&gt; elements and uses the jQuery html() to get the text value of the cell and add it to the array. We then can then do the same technique to get the device id and then build a list as a string and finally dump it to the browser’s console.</p>

<p>I also needed to the email addresses of all of our registered developers. The email addresses were not in a table, but part of a list. Each email address is wrapped inside a section element like this</p>

<pre class="brush: xml; highlight: [3,4,5,6,7,8]; title: ; notranslate" title="">&lt;section class="col-100 ng-scope"&gt;
  &lt;p ng-bind="::person.fullName" class="ng-binding"&gt;First Last&lt;/p&gt;
  &lt;a class="smaller ng-binding" 
    ng-bind="::person.email" 
    ng-href="mailto:first.last@yourcompany.com" 
    href="mailto:first.last@yourcompany.com"&gt;
    first.last@yourcompany.com
  &lt;/a&gt;
&lt;/section&gt;
</pre>

<p>I just needed the text part from the <a></a> element. Getting the email addresses was a simpler version of the code to get the devices. I just a jQuery select on the ng-bind attribute and matched on the value “::person.email”. That ended up being a single line of code to run in the browser’s developer console</p>

<pre class="brush: jscript; title: ; notranslate" title="">$('a[ng-bind="::person.email"]').each(function(){
  console.log($(this).text())
  });
</pre>

<p>And that’s how you can screen scrape data from a web page that doesn’t provide any support for exporting the data.</p>

<p>Bonus round<br />
The aria-describedby attribute is a commonly used accessibility element used to describe the element that the tag is part of. The “aria” part of the attribute name is an acronym for <a href="https://www.w3.org/TR/wai-aria/">Accessible Rich Internet Applications</a>. Among other things, it was designed to allow assisted reading devices help parse a page for users with visual difficulties. It’s a good technology to use on your web pages.</p>

  </div><a class="u-url" href="/2017/03/16/using-console-jquery-to-scrape-lists-from-apples-developer-portal/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Chris Miller&#39;s 4th Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Chris Miller&#39;s 4th Blog</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/anotherlab"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">anotherlab</span></a></li><li><a href="https://www.twitter.com/anotherlab"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">anotherlab</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
